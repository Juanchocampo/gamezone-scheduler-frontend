<div class="max-w-xl mx-auto mt-8 font-monserrat">
  <div class="flex items-center gap-2">
    <button class="btn btn-ghost btn-sm" (click)="goBack()">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        class="w-4 h-4"
      >
        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" />
      </svg>
      Volver
    </button>
  </div>
  <div class="card bg-base-100 shadow-xl px-1">
    @if (isLoading()) {
    <div class="flex w-full flex-col gap-4">
      <div class="flex items-center gap-4">
        <div class="skeleton h-16 w-16 shrink-0 rounded-full"></div>
        <div class="flex flex-col gap-4">
          <div class="skeleton h-4 w-20"></div>
          <div class="skeleton h-4 w-28"></div>
        </div>
      </div>
      <div class="skeleton h-32 w-full"></div>
    </div>
    }@else if(reservation()){
    <div class="card-body flex flex-col gap-7">
      <div class="flex items-center gap-3">
        <div class="w-11 rounded-full">
          <img src="/images/defaultProfile.png" alt="Foto de perfil" />
        </div>

        <div class="flex flex-col align-middle justify-center">
          <span class="text-md font-bold">{{ reservation().user.name }}</span>
          <span class="opacity-70">{{ reservation().user.email }}</span>
        </div>
      </div>
      <div class="flex flex-col gap-3">
        <h2 class="card-title text-sm font-medium">Información de Reserva</h2>
        <div class="flex justify-between gap-4">
          <div class="flex flex-1 justify-start items-start flex-col gap-2">
            <div class="flex justify-center items-center gap-1">
              <svg
                class="opacity-80 dark:text-amber-50"
                width="18px"
                height="18px"
                stroke="currentColor"
                stroke-width="1.5"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M10 9.01L10.01 8.99889"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
                <path
                  d="M14 9.01L14.01 8.99889"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
                <path
                  d="M10 13.01L10.01 12.9989"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
                <path
                  d="M14 13.01L14.01 12.9989"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
                <path
                  d="M10 17.01L10.01 16.9989"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
                <path
                  d="M14 17.01L14.01 16.9989"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
                <path
                  d="M6 20.4V5.6C6 5.26863 6.26863 5 6.6 5H12V3.6C12 3.26863 12.2686 3 12.6 3H17.4C17.7314 3 18 3.26863 18 3.6V20.4C18 20.7314 17.7314 21 17.4 21H6.6C6.26863 21 6 20.7314 6 20.4Z"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
              </svg>

              <h3 class="opacity-80">Sede</h3>
            </div>
            <span>{{ reservation().console.campus.campus_name | titlecase }}</span>
          </div>
          <div class="flex flex-1 justify-start items-start flex-col gap-2">
            <div class="flex justify-center items-center gap-1">
              <svg
                class="opacity-80 dark:text-amber-50"
                width="18px"
                height="18px"
                stroke="currentColor"
                stroke-width="1.5"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M17.5 17.5C20 21 23.9486 18.4151 23 15C21.5753 9.87113 20.8001 7.01556 20.3969 5.50793C20.1597 4.62136 19.3562 4 18.4384 4L5.56155 4C4.64382 4 3.844 4.62481 3.62085 5.515C2.7815 8.86349 2.0326 11.8016 1.14415 15C0.195501 18.4151 4.14415 21 6.64415 17.5"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
                <path
                  d="M18 8.5L18.0111 8.51"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
                <path
                  d="M16.49 7L16.5011 7.01"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
                <path
                  d="M16.49 10L16.5011 10.01"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
                <path
                  d="M15 8.5L15.0111 8.51"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
                <path
                  d="M7 7V10"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
                <path
                  d="M5.5 8.5H8.5"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
                <path
                  d="M8 16C9.10457 16 10 15.1046 10 14C10 12.8954 9.10457 12 8 12C6.89543 12 6 12.8954 6 14C6 15.1046 6.89543 16 8 16Z"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
                <path
                  d="M16 16C17.1046 16 18 15.1046 18 14C18 12.8954 17.1046 12 16 12C14.8954 12 14 12.8954 14 14C14 15.1046 14.8954 16 16 16Z"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
              </svg>
              <h3 class="opacity-80">Consola</h3>
            </div>
            <span>{{ reservation().console.console_name | titlecase }}</span>
          </div>
          <div class="flex flex-1 justify-start items-start flex-col gap-2">
            <div class="flex justify-center items-center gap-1">
              <svg
                class="opacity-80 dark:text-amber-50"
                width="18px"
                height="18px"
                stroke="currentColor"
                stroke-width="1.5"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M15 4V2M15 4V6M15 4H10.5M3 10V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V10H3Z"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
                <path
                  d="M3 10V6C3 4.89543 3.89543 4 5 4H7"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
                <path
                  d="M7 2V6"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
                <path
                  d="M21 10V6C21 4.89543 20.1046 4 19 4H18.5"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
              </svg>
              <h3 class="opacity-80">Fecha</h3>
            </div>
            <span>{{ reservation().starts_at | date : 'yy/MM/dd, HH:mm' }}</span>
          </div>
        </div>
        <div class="card-actions justify-start">
          @switch (reservation().status_id) { @case (1) {
          <div class="badge badge-outline badge-accent">Pendiente</div>
          } @case (2) {
          <div class="badge badge-outline badge-success">Atendido</div>
          } @case (3) {
          <div class="badge badge-outline badge-info whitespace-nowrap">En uso</div>
          } @case (4) {
          <div class="badge badge-outline badge-error">Expirado</div>
          } @case (5) {
          <div class="badge badge-outline badge-accent">Cancelado</div>
          } }
        </div>
        @if (isMonitor()) { @if(reservation().status_id == 1){
        <div class="card-actions justify-end">
          <button class="btn btn-primary" (click)="markAsAttended()">Confirmar entrada</button>
        </div>
        }@else {
        <div class="card-actions justify-end">
          <button class="btn btn-primary" (click)="markAsAttendedOut()">Confirmar salida</button>
        </div>
        } }
      </div>
      <div class="flex flex-col justify-center items-center text-center text-2xl font-bold">
        <h3>Codigo QR</h3>
        <qrcode [qrdata]="reservation().qr_sig!" [width]="230"></qrcode>
      </div>
    </div>
    }@else {
    <div class="flex flex-col justify-center items-center gap-4 py-8">
      <svg
        width="40px"
        height="40px"
        stroke-width="1.5"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        color="#000000"
      >
        <path
          d="M12 6L12 12L18 12"
          stroke="#000000"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        ></path>
        <path
          d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"
          stroke="#000000"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        ></path>
      </svg>
      <span class="text-lg font-medium text-gray-600">No hay reservas activas</span>
      <p class="text-gray-400 text-sm">Cuando hagas una reserva, aparecerá aquí.</p>
    </div>
    }
  </div>
</div>
